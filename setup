#!/bin/sh


if [ -x /opt/homebrew/bin ];
then
    echo "Skipping install of brew. It is already installed.";
    echo "Updating brew..."
    brew update;
    echo "Updated brew."
else
    echo "Installing brew...";
    /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)";
    if [ -x /opt/homebrew/bin ];
    then
        echo "Installed brew";
    else
        exit 1;
    fi
fi

echo "Running brew bundle...";

brew bundle;

echo "brew bundle complete";

# do some ruby specific stuff
RUBY_VERSION=2.5.1
echo "ðŸ¦„  ruby" $RUBY_VERSION
rbenv install -s $RUBY_VERSION
rbenv global $RUBY_VERSION

# bash-it
read -p "Install bash-it? y/n " -n 1 -r
echo # move to a new line
if [[ $REPLY =~ ^[Yy]$ ]]
then
  echo "Installing bash-it"
    if [ -x ~/.bash_it/install.sh ]; then
        echo ", since it's already installed.";
    else
    git clone --depth=1 https://github.com/Bash-it/bash-it.git ~/.bash_it
    ~/.bash_it/install.sh
    fi
else
  echo "Skipping install of bash-it"
fi


if [ -x ~/.vimrc ];
then
  echo "Skipping vim config, since .vimrc already exists.";
else
  curl -s 'http://vim-bootstrap.com/generate.vim' --data 'langs=javascript&langs=php&langs=html&langs=ruby&langs=go&editor=vim' > ~/.vimrc
fi


echo "Setup complete";
